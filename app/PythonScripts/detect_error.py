import numpy as np
import math

users_pose  = [
    [0.26625069975852966, 0.33803537487983704, -0.1590183675289154],
    [0.2560405135154724, 0.3242892324924469, -0.19615799188613892], 
    [0.257402628660202, 0.32049259543418884, -0.1961139291524887], 
    [0.25878646969795227, 0.31644532084465027, -0.19623656570911407], 
    [0.252015084028244, 0.3273991346359253, -0.139041006565094], 
    [0.2506130337715149, 0.32605689764022827, -0.13900932669639587], 
    [0.24929487705230713, 0.3246411085128784, -0.13884380459785461], 
    [0.2674368917942047, 0.2919197380542755, -0.24573886394500732], 
    [0.2534945607185364, 0.3076714873313904, 0.015211398713290691], 
    [0.2832384407520294, 0.3295455276966095, -0.1686204969882965], 
    [0.27710774540901184, 0.335440993309021, -0.09289370477199554], 
    [0.3594854474067688, 0.24842919409275055, -0.28536248207092285], 
    [0.28572461009025574, 0.31927749514579773, 0.23230428993701935], 
    [0.43833377957344055, 0.15734857320785522, -0.40940895676612854], 
    [0.22468726336956024, 0.382561594247818, 0.5525094270706177], 
    [0.5317646265029907, 0.19259819388389587, -0.49838054180145264], 
    [0.1710633635520935, 0.3684663772583008, 0.7288552522659302], 
    [0.5606578588485718, 0.1949099600315094, -0.5375768542289734], 
    [0.14658485352993011, 0.36216527223587036, 0.7670549750328064], 
    [0.5578015446662903, 0.2075834572315216, -0.5497052073478699], 
    [0.15180519223213196, 0.3570180833339691, 0.7415966391563416], 
    [0.5478498935699463, 0.21000444889068604, -0.5015252828598022], 
    [0.16408291459083557, 0.35783472657203674, 0.7204669713973999], 
    [0.5201914310455322, 0.4207984209060669, -0.18493817746639252], 
    [0.49776703119277954, 0.44816023111343384, 0.18494312465190887], 
    [0.35592666268348694, 0.5346580743789673, -0.21004608273506165], 
    [0.6166242361068726, 0.5757725238800049, 0.200927272439003], 
    [0.5107901692390442, 0.6443974375724792, 0.033986128866672516], 
    [0.7800197601318359, 0.6710343360900879, 0.28325194120407104], 
    [0.552850604057312, 0.6498035788536072, 0.06367551535367966], 
    [0.812722384929657, 0.6669078469276428, 0.286485880613327], 
    [0.47842487692832947, 0.7293938994407654, 0.08162738382816315], 
    [0.7796235084533691, 0.7566627860069275, 0.215040385723114]
]
correct_pose = [
    [0.34092003107070923, 0.34002208709716797, -0.09257681667804718], 
    [0.3348924219608307, 0.32165762782096863, -0.10262637585401535], 
    [0.33578529953956604, 0.3148338794708252, -0.10262276977300644], 
    [0.33659136295318604, 0.30737438797950745, -0.10271568596363068], 
    [0.3319527804851532, 0.3332563042640686, -0.07166185230016708], 
    [0.3308771848678589, 0.33486902713775635, -0.0716547816991806], 
    [0.32970890402793884, 0.33622196316719055, -0.0715903788805008], 
    [0.34189143776893616, 0.28189682960510254, -0.08034935593605042], 
    [0.333234041929245, 0.3189964294433594, 0.06120893359184265], 
    [0.35141563415527344, 0.3311357796192169, -0.07987058162689209], 
    [0.34842562675476074, 0.3431183695793152, -0.03881813585758209], 
    [0.4001997113227844, 0.2581805884838104, -0.0929737463593483], 
    [0.3676360249519348, 0.3404785990715027, 0.1836669147014618], 
    [0.45022115111351013, 0.14223000407218933, -0.15445154905319214], 
    [0.30529075860977173, 0.39557692408561707, 0.2705514430999756], 
    [0.5318928360939026, 0.07779856026172638, -0.2008306235074997], 
    [0.2634774446487427, 0.2906392514705658, 0.30424603819847107], 
    [0.5522304177284241, 0.05549388751387596, -0.2165522575378418], 
    [0.24892058968544006, 0.26244106888771057, 0.3067823350429535], 
    [0.5550183653831482, 0.06246884539723396, -0.24185867607593536], 
    [0.25303903222084045, 0.2522624731063843, 0.31242871284484863], 
    [0.5490230917930603, 0.07590033859014511, -0.21114976704120636], 
    [0.2603752017021179, 0.26103705167770386, 0.3048805296421051], 
    [0.5273796916007996, 0.4792220890522003, -0.11205239593982697], 
    [0.5357835292816162, 0.48788705468177795, 0.11186294257640839], 
    [0.40986692905426025, 0.6248186826705933, -0.11763787269592285], 
    [0.636751651763916, 0.6811400055885315, 0.08074058592319489], 
    [0.5238515734672546, 0.7760397791862488, -0.04067033901810646], 
    [0.7480974793434143, 0.8313937783241272, 0.06129525601863861], 
    [0.5530290007591248, 0.7880994081497192, -0.031505901366472244], 
    [0.7672996520996094, 0.8380101919174194, 0.05553698167204857], 
    [0.492453008890152, 0.8761402368545532, -0.03574923798441887], 
    [0.745939314365387, 0.9361812472343445, 0.002694213530048728]
]
def calculate_angle(p1, p2, p3):

    v1 = np.array([p2[0] - p1[0], p2[1] - p1[1], p2[2] - p1[2]])
    v2 = np.array([p3[0] - p2[0], p3[1] - p2[1], p3[2] - p2[2]])
    
    cosine_angle = np.dot(v1, v2) / (np.linalg.norm(v1) * np.linalg.norm(v2))
    
    cosine_angle = np.clip(cosine_angle, -1.0, 1.0)
    
    return np.degrees(np.arccos(cosine_angle))

def calculate_pose_angles(users_pose, correct_pose):

    angles_users_pose = {}
    angles_correct_pose = {}
    
    angles_users_pose["Shoulder-Elbow-Wrist"] = calculate_angle(users_pose[12], users_pose[14], users_pose[16])
    angles_correct_pose["Shoulder-Elbow-Wrist"] = calculate_angle(correct_pose[12], correct_pose[14], correct_pose[16])
    
    return angles_users_pose, angles_correct_pose

angles_users_pose, angles_correct_pose = calculate_pose_angles(users_pose, correct_pose)

print("Angles for the Users Pose:")
for angle_name, angle_value in angles_users_pose.items():
    print(f"{angle_name}: {angle_value:.2f}°")

print("\nAngles for the Correct Pose:")
for angle_name, angle_value in angles_correct_pose.items():
    print(f"{angle_name}: {angle_value:.2f}°")